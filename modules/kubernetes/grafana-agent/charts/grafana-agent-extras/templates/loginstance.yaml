apiVersion: monitoring.grafana.com/v1alpha1
kind: LogsInstance
metadata:
  name: platform
  namespace: {{ .Release.Namespace }}
  labels:
  labels:
    {{- include "grafana-agent-extras.labels" . | nindent 4 }}
    agent: grafana-agent-platform-logs
spec:
  clients:
    - url: {{ .Values.remote.logsUrl }}
      tenantId: {{ .Values.tenantId }}
      externalLabels:
        cluster: {{ .Values.clusterName }}
        environment: {{ .Values.environment }}
      tlsConfig:
        keySecret:
          key: {{ .Values.client.key }}
          name: xenit-proxy"
        cert:
          Secret:
            key: {{ .Values.client.cert }}
            name: xenit-proxy
  podLogsSelector:
    matchLabels:
      xkf.xenit.io/monitoring: platform
